<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            transform: rotateX(6deg) rotateY(6deg);
        }
        .circle {
            border:1px solid black;
            border-radius:50%;
            position: absolute;;
        }
        .ball {
            position: absolute;
            border-radius:50%;
        }
                    /* transform: rotateX(30deg) rotateY(-50deg); */

    </style>
</head>
<body>
    <script>
         //随机生成十六进制颜色
        function randomHexColor() {
            return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);
        }
        function getCSS(el, style){
            debugger
            if(window.getComputedStyle) {
                return getComputedStyle(el)[style];
            }
            return el.currentStyle[style];
        } 

        function circleMove({el, r}) {
            const x0 = parseFloat(getCSS(el, 'left'));
            const y0 = parseFloat(getCSS(el, 'top')) - r;
            let radian = 0;
            let timer = setInterval(() => {
                radian = radian + 1;
                const x = x0 + r * Math.sin(radian * Math.PI / 180);
                const y = y0 + r * Math.cos(radian * Math.PI / 180);
                el.style.left = `${x}px`;
                el.style.top = `${y}px`;
            }, 16);
        }
  
        const centerX = window.innerWidth / 2;
        const centerY = window.innerHeight / 2;
        const arr = [{
            ballWidth: 40,
            ballHeight: 40,
            ballLeft: centerX - (40 / 2),
            ballTop: centerY - (40 / 2),
        }, {
            r: 50,
            circleWidth: 100,
            circleHeight: 100,
            circleLeft: Math.abs(centerX - 100 / 2),
            circleTop: Math.abs(centerY - 100 / 2),
            ballWidth: 20,
            ballHeight: 20,
            ballLeft: 100 / 2 - 20 / 2,
            ballTop: 100 - 20 / 2,
        }, {
            r: 100,
            circleWidth: 200,
            circleHeight: 200,
            circleLeft: Math.abs(centerX - 200 / 2),
            circleTop: Math.abs(centerY - 200 / 2),
            ballWidth: 50,
            ballHeight: 50,
            ballLeft: 200 / 2 - 50 / 2,
            ballTop: 200 - 50 / 2,
        }, {
            r: 150,
            circleWidth: 300,
            circleHeight: 300,
            circleLeft: Math.abs(centerX - 300 / 2),
            circleTop: Math.abs(centerY - 300 / 2),
            ballWidth: 40,
            ballHeight: 40,
            ballLeft: 300 / 2 - 40 / 2,
            ballTop: 300 - 40 / 2,
        }, {
            r: 200,
            circleWidth: 400,
            circleHeight: 400,
            circleLeft: Math.abs(centerX - 400 / 2),
            circleTop: Math.abs(centerY - 400 / 2),
            ballWidth: 40,
            ballHeight: 40,
            ballLeft: 400 / 2 - 40 / 2,
            ballTop: 400 - 40 / 2,
        }];

        function createDiv({
            width,
            height,
            left,
            top,
            className,
            backgroundColor,
        }) {
            const div = document.createElement('div');
            div.style.width = `${width}px`;
            div.style.height = `${height}px`;
            div.style.left = `${left}px`;
            div.style.top = `${top}px`;
            div.style.backgroundColor = backgroundColor;
            div.classList.add(className);
            return div;
        }

        arr.forEach(({
            r,
            circleWidth,
            circleHeight,
            circleLeft,
            circleTop,
            ballWidth,
            ballHeight,
            ballLeft,
            ballTop,
        }) => {
            const circleDiv = createDiv({
                width: circleWidth,
                height: circleHeight,
                left: circleLeft,
                top: circleTop,
                className: 'circle',
            });
            const ballDiv = createDiv({
                width: ballWidth,
                height: ballHeight,
                left: ballLeft,
                top: ballTop,
                className: 'ball',
                backgroundColor: randomHexColor(),
            });
            circleDiv.appendChild(ballDiv);
            document.body.appendChild(circleDiv);
            circleMove({
              el: ballDiv,
              r,
            });
        });

        addEventListener('mousedown', handleMousedown);
        addEventListener('mousemove', handleMousemove);
        addEventListener('mouseup', handleMouseup);

        let isHit;
        let startX;
        let startY;
        function handleMousedown(e) {
            isHit = true;
            startX = e.x;
            startY = e.y;
        }

        function handleMousemove(e) {
            if (!isHit) return;
            const x = e.x - startX;
            const y = e.y - startY;
            console.log(getCSS(document.body, 'transform'));
            // document.body.style.transform = ``
            // console.log(`curX is ${e.x - startX}`);
            // console.log(`curY is ${e.y}`)
        }

        function handleMouseup() {
            isHit = false;
        }

    </script>
</body>
</html>
